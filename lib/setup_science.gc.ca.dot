MODELUTILS=/fs/ssm/eccc/mrd/rpn/MIG/ENV/d/modelutils/modelutils_1.4-LTS.4

case "${ORDENV_PLAT}" in

   ubuntu-14.04-amd64-64)
      BH_MAKE=make
      BH_MODE=intel
      BH_PACKAGE=/fs/ssm/hpco/exp/bh/bh_0.17_all
      HPCS_BASE=/fs/ssm/hpco/tmp/eccc/201402/05/base
      HPCS_COMP=/fs/ssm/hpco/exp/intel-2016.1.156
      HPCS_CODE_TOOL=/fs/ssm/hpco/exp/jdm536/code-tools/code-tools_2.0_all
      RPN_LIB=/fs/ssm/eccc/mrd/rpn/libs/16.2
      MY_FFLAGS="-openmp -fp-model source -warn all ${MY_FFLAGS}"
      . ssmuse-sh -x ${HPCS_BASE} -d ${HPCS_COMP} 
      . ssmuse-sh -p ${HPCS_CODE_TOOL}
      . ssmuse-sh -d ${RPN_LIB}
      . ssmuse-sh -p ${BH_PACKAGE} -d ${MODELUTILS}
      :;;
   sles-11-haswell-64-xc40)
      BH_MAKE=make
      BH_MODE=intel
      BH_PACKAGE=/fs/ssm/hpco/exp/bh/bh_0.17_all
      RPN_LIB=/fs/ssm/eccc/mrd/rpn/libs/16.2
      MY_FFLAGS="-openmp -fp-model source -warn all ${MY_FFLAGS}"
      . ssmuse-sh -d ${RPN_LIB}
      . ssmuse-sh -p ${BH_PACKAGE}
       # There are no modelutils for haswell we take it from broadwell
      . ssmuse-sh -p ${BH_PACKAGE} -d ${MODELUTILS}
      MU_LIB=$(echo ${MODELUTILS}/${ORDENV_PLAT}/lib/${COMP_ARCH} | sed 's/sles-11-haswell-64-xc40/sles-11-broadwell-64-xc40/')
      export LD_LIBRARY_PATH="${LD_LIBRARY_PATH}:${MU_LIB}"
     :;;
   sles-11-broadwell-64-xc40)
      # Pour obtenir l'architecture broadwell faire :
      # . r.env.dot --arch sles-11-broadwell-64-xc40
      BH_MAKE=make
      BH_MODE=intel
      BH_PACKAGE=/fs/ssm/hpco/exp/bh/bh_0.17_all
      RPN_LIB=/fs/ssm/eccc/mrd/rpn/libs/16.2
      MY_FFLAGS="-openmp -fp-model source -warn all ${MY_FFLAGS}"
      . ssmuse-sh -d ${RPN_LIB}
      . ssmuse-sh -p ${BH_PACKAGE} -d ${MODELUTILS}
      :;;

   "") echo "ERROR: variable ORDENV_PLAT not set"
       echo "       Please review setup.dot for your platform"
       :;;

    *) echo platform ${ORDENV_PLAT} not suported, please review setup.dot
       :;;
esac
