echo "Acquiring compilation tools"

. ./version.dot

unset MY_FFLAGS MY_CFLAGS

# Note avec -O1 sur ubuntu-12.04-amd64-64 intel13sp1u2 les tests suivants donnent un SIGSEGV (OK avec -O3)
# constructor_build_all constructor_gen_5002_5003_5005 get_set_diag_height read_write_read_all
# set_write_5002 test_allow_reshape test_vgd_free write_5002

# Le 18 sep 2016 sur gpsc-in les tests suivants plantent avec -O2 (OK avec -O0, OK avec -O1, OK avec -O3)
#constructor_gen_1002_5001   ligne 1232
#levels_toplevel_value
#levels_withref
#levels_withref_profile_all
#use_legacy
#c_levels
#c_use_new_read


MY_FFLAGS="-O1"
#MY_FFLAGS="-C -g -O0 -lefence"
MY_CFLAGS="-O1"
#MY_CFLAGS="-g -O0 -lefence"

if   [ $(hostname -d) = cmc.ec.gc.ca ];then
   . ./setup_cmc.ec.gc.ca.dot
elif [ $(hostname -d) = science.gc.ca ];then
   . ./setup_science.gc.ca.dot
else
   echo "ERROR ERROR ERROR ERROR ERROR ERROR ERROR ERROR ERROR ERROR ERROR ERROR"
   echo "ERROR ERROR ERROR ERROR ERROR ERROR ERROR ERROR ERROR ERROR ERROR ERROR"
   echo "ERROR ERROR ERROR ERROR ERROR ERROR ERROR ERROR ERROR ERROR ERROR ERROR"
   echo "ERROR ERROR ERROR ERROR ERROR ERROR ERROR ERROR ERROR ERROR ERROR ERROR"
   echo Domain $(hostname -d) not supported
fi

export MY_FFLAGS BH_MAKE BH_HOST BH_MODE RPN_LIB SHARED_RNM_SSM_PREF SHARED_RNM_EXT

